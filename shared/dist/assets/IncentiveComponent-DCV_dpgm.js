import{r as F,i as x,j as B,d as k,v as ee,c as m,o as u,F as L,l as S,b as s,t as _,n as h,x as E,f as O,e as te,a as I,w as V,T as ne,k as ae,s as D}from"./index-C3g_gNjf.js";import{u as N,_ as ie}from"./defaults-Bw6pt-Rt.js";const ke="/bundles/licenseathon-vue/shared/dist/assets/logo_2025-DK4M8EH1.png";var le=function(n){if(n){var a=function(e){return[].slice.call(e)},i=0,o=1,l=2,v=3,f=[],z=null,y="requestAnimationFrame"in n?function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{sync:!1};n.cancelAnimationFrame(z);var t=function(){return b(f.filter(function(r){return r.dirty&&r.active}))};if(e.sync)return t();z=n.requestAnimationFrame(t)}:function(){},c=function(e){return function(t){f.forEach(function(r){return r.dirty=e}),y(t)}},b=function(e){e.filter(function(r){return!r.styleComputed}).forEach(function(r){r.styleComputed=R(r)}),e.filter(q).forEach(T);var t=e.filter(p);t.forEach(d),t.forEach(function(r){T(r),C(r)}),t.forEach(G)},C=function(e){return e.dirty=i},d=function(e){e.availableWidth=e.element.parentNode.clientWidth,e.currentWidth=e.element.scrollWidth,e.previousFontSize=e.currentFontSize,e.currentFontSize=Math.min(Math.max(e.minSize,e.availableWidth/e.currentWidth*e.previousFontSize),e.maxSize),e.whiteSpace=e.multiLine&&e.currentFontSize===e.minSize?"normal":"nowrap"},p=function(e){return e.dirty!==l||e.dirty===l&&e.element.parentNode.clientWidth!==e.availableWidth},R=function(e){var t=n.getComputedStyle(e.element,null);return e.currentFontSize=parseFloat(t.getPropertyValue("font-size")),e.display=t.getPropertyValue("display"),e.whiteSpace=t.getPropertyValue("white-space"),!0},q=function(e){var t=!1;return!e.preStyleTestCompleted&&(/inline-/.test(e.display)||(t=!0,e.display="inline-block"),e.whiteSpace!=="nowrap"&&(t=!0,e.whiteSpace="nowrap"),e.preStyleTestCompleted=!0,t)},T=function(e){e.element.style.whiteSpace=e.whiteSpace,e.element.style.display=e.display,e.element.style.fontSize=e.currentFontSize+"px"},G=function(e){e.element.dispatchEvent(new CustomEvent("fit",{detail:{oldValue:e.previousFontSize,newValue:e.currentFontSize,scaleFactor:e.currentFontSize/e.previousFontSize}}))},W=function(e,t){return function(r){e.dirty=t,e.active&&y(r)}},H=function(e){return function(){f=f.filter(function(t){return t.element!==e.element}),e.observeMutations&&e.observer.disconnect(),e.element.style.whiteSpace=e.originalStyle.whiteSpace,e.element.style.display=e.originalStyle.display,e.element.style.fontSize=e.originalStyle.fontSize}},K=function(e){return function(){e.active||(e.active=!0,y())}},J=function(e){return function(){return e.active=!1}},Q=function(e){e.observeMutations&&(e.observer=new MutationObserver(W(e,o)),e.observer.observe(e.element,e.observeMutations))},U={minSize:16,maxSize:512,multiLine:!0,observeMutations:"MutationObserver"in n&&{subtree:!0,childList:!0,characterData:!0}},P=null,X=function(){n.clearTimeout(P),P=n.setTimeout(c(l),w.observeWindowDelay)},Y=["resize","orientationchange"];return Object.defineProperty(w,"observeWindow",{set:function(e){var t="".concat(e?"add":"remove","EventListener");Y.forEach(function(r){n[t](r,X)})}}),w.observeWindow=!0,w.observeWindowDelay=100,w.fitAll=c(v),w}function A(e,t){var r=Object.assign({},U,t),Z=e.map(function(M){var $=Object.assign({},r,{element:M,active:!0});return function(g){g.originalStyle={whiteSpace:g.element.style.whiteSpace,display:g.element.style.display,fontSize:g.element.style.fontSize},Q(g),g.newbie=!0,g.dirty=!0,f.push(g)}($),{element:M,fit:W($,v),unfreeze:K($),freeze:J($),unsubscribe:H($)}});return y(),Z}function w(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return typeof e=="string"?A(a(document.querySelectorAll(e)),t):A([e],t)[0]}}(typeof window>"u"?null:window);const oe=(n,a)=>{Array.isArray(n)?n.forEach(i=>{oe(i,a)}):le(n,a).forEach(i=>{i.fit()})};function Ce(n){var a;return((a=n==null?void 0:n.teams)==null?void 0:a.map(i=>i.players[0]))||[]}function Ee(){const n=F(new Date),a=x(()=>n.value.getSeconds());function i(){n.value=new Date}return B(()=>{i(),setInterval(i,1e3)}),a}const re={key:0,class:"mb-1"},se={class:"flex h-full"},ue={class:"absolute ms-2 flex items-center h-[inherit]"},ce={key:0,id:"target-name",class:"mb-1"},de={id:"target-value"},me=["aria-valuenow"],j=k({__name:"ProgressBar",props:{amount_raised:{},total:{},name:{},colour:{},position:{},textSize:{default:"xl"}},setup(n){const a=ee(n,["textSize"]),i=x(()=>a.colour??"bg-amber-500"),o=x(()=>a.total===0?0:a.amount_raised/a.total*100);return(l,v)=>(u(),m(L,null,[l.name!=null&&l.position==="over"?(u(),m("p",re,[s("b",null,_(l.name),1)])):S("",!0),s("div",se,[s("div",ue,[s("p",{class:h(`text-${l.textSize}`)},[l.name!=null&&l.position==="in"?(u(),m("span",ce,_(l.name)+": ",1)):S("",!0),s("b",de," $"+_(l.amount_raised),1)],2)]),s("div",{class:h(["text-black transition-all rounded-l",`${o.value>=100?"rounded-r":"rounded-r-none"} ${i.value}`]),style:E(`width: ${o.value}%`),role:"progressbar","aria-valuenow":o.value,"aria-valuemin":"0","aria-valuemax":"100"},"   ",14,me),s("div",{class:h(["bg-black/25 transition-all rounded-r",o.value<=0?"rounded-l":"rounded-l-none"]),style:E(`width: calc(100% - ${o.value}%)`)},"   ",6)])],64))}}),fe={id:"poll-bg",class:"w-full h-full p-2 rounded-xl flex flex-col gap-2"},pe={class:""},ve={class:"relative grow flex gap-2"},ge=k({__name:"PollComponent",props:{textSize:{default:"xl"},poll:{}},setup(n){const a=x(()=>n.poll.options.map(o=>Number(o.amount_raised.value)).reduce((o,l)=>o+l,0)),i=["bg-blue-500","bg-amber-400","bg-red-400","bg-green-500"];return(o,l)=>(u(),m("div",fe,[s("div",pe,[s("div",{class:h(`text-${o.textSize} mb-1`)},[l[0]||(l[0]=O(" Bid War: ")),s("b",null,_(o.poll.name),1)],2),l[1]||(l[1]=s("hr",{class:"mb-1"},null,-1))]),s("div",ve,[(u(!0),m(L,null,te(o.poll.options,(v,f)=>(u(),m("div",{key:v.id,style:E(`width: ${100/o.poll.options.length}%;`)},[I(j,{amount_raised:parseInt(v.amount_raised.value),total:a.value,name:v.name,colour:i[f],position:"in","text-size":"xl"},null,8,["amount_raised","total","name","colour"])],4))),128))])]))}}),ye={id:"options",class:"w-full h-full p-2 flex flex-col rounded-xl"},he={class:"relative grow"},be=k({__name:"TargetComponent",props:{textSize:{default:"xl"},target:{}},setup(n){return(a,i)=>(u(),m("div",ye,[(u(),m("div",{class:"w-full max-w-full",key:a.target.id},[s("div",{class:h(`text-${a.textSize} mb-1`)},[i[0]||(i[0]=O(" Incentive: ")),s("b",null,_(a.target.name),1)],2),i[1]||(i[1]=s("hr",{class:"mb-1"},null,-1))])),s("div",he,[I(j,{amount_raised:parseInt(a.target.amount_raised.value),total:parseInt(a.target.amount.value),position:"in","text-size":"3xl"},null,8,["amount_raised","total"])])]))}}),we="/bundles/licenseathon-vue/shared/dist/assets/TLC_primaryNOTAG-Cti1RBft.svg",Se={key:0,class:"h-full w-full max-w-full max-h-full flex flex-col relative overflow-x-hidden overflow-y-clip z-10"},_e={class:""},xe=["src"],ze=k({__name:"IncentiveComponent",props:{ratio:{},color:{}},setup(n){const a=N("polls","nodecg-tiltify"),i=F(z()),o=N("targets","nodecg-tiltify"),l=F(y()),v=[{type:"message",item:{id:"tlclogo",orientation:"h",text:"In support of: ",img:we}},{type:"message",item:{text:"Donate at: www.licenseathon.live/donate",orientation:"v",id:"donomsg"}}],f=x(()=>[...v,...i.value,...l.value]);function z(){var d;return((d=a.data)==null?void 0:d.filter(p=>p.active).map(p=>({type:"poll",item:p})))??[]}function y(){var d;return((d=o.data)==null?void 0:d.filter(p=>p.active).map(p=>({type:"target",item:p})))??[]}V(()=>a.data,d=>{d&&(i.value=z())}),V(()=>o.data,d=>{d&&(l.value=y())});const c=x(()=>f.value[b.value]),b=F(0);B(()=>{setInterval(C,8e3)});function C(){f.value.length>0&&(b.value+1>=f.value.length?b.value=0:b.value++)}return(d,p)=>(u(),m("div",{id:"incentive-container",class:h(`layout-${d.ratio} absolute rounded-xl inline-block`)},[f.value.length>0?(u(),m("div",Se,[I(ne,{name:"slide"},{default:ae(()=>[c.value?(u(),m("div",{class:"h-full w-full",key:c.value.item.id},[c.value.type==="poll"?(u(),D(ge,{key:0,class:"font-[Fusion]",textSize:d.ratio==="4-3"?"xl":"2xl",poll:c.value.item},null,8,["textSize","poll"])):c.value.type==="target"?(u(),D(be,{key:1,class:"font-[Fusion]",target:c.value.item},null,8,["target"])):c.value.type==="message"?(u(),m("div",{key:2,class:h(["font-sans flex basis-1 h-full items-center justify-center text-4xl gap-2 p-4",c.value.item.orientation==="v"?"flex-col":"flex-row"])},[s("p",_e,_(c.value.item.text),1),c.value.item.img?(u(),m("img",{key:0,src:c.value.item.img,class:"bg-white/80 rounded-xl min-w-0 max-w-8/12 min-h-0 max-h-full"},null,8,xe)):S("",!0)],2)):S("",!0)])):S("",!0)]),_:1})])):S("",!0)],2))}}),Ie=ie(ze,[["__scopeId","data-v-bf4392d0"]]);export{Ie as I,ke as _,Ce as a,oe as f,Ee as g};
