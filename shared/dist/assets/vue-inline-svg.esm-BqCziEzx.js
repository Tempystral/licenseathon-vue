import{d as L,y as P,r as w,w as $,z as M,s as N,o as C,q as D}from"./index-C3g_gNjf.js";const h={};function G(n){return n.getIsPending!==void 0}function H(n){if(G(n))return n;let o=!0,r=n.then(t=>(o=!1,t),t=>{throw o=!1,t});return r.getIsPending=function(){return o},r}function O(n){let o={};const r=n.attributes;if(!r)return o;for(let t=r.length-1;t>=0;t--)o[r[t].name]=r[t].value;return o}function _(n){return Object.keys(n).reduce((o,r)=>(n[r]!==!1&&n[r]!==null&&n[r]!==void 0&&(o[r]=n[r]),o),{})}function A(n,o){const{class:r,style:t,...f}=O(n),{class:p,style:l,...m}=_(o);return{class:[r,p],style:[t,l],...f,...m}}const j=L({inheritAttrs:!1,__name:"InlineSvg",props:{src:{},title:{default:void 0},transformSource:{type:Function,default:n=>n},keepDuringLoading:{type:Boolean,default:!0},uniqueIds:{type:[Boolean,String],default:!1},uniqueIdsBase:{default:""}},emits:["loaded","unloaded","error"],setup(n,{expose:o,emit:r}){const t=n,f=r,p=P(),l=w(),m=w(),S=Math.random().toString(36).substring(2);o({svgElSource:l,request:m}),$(()=>t.src,e=>{x(e)}),x(t.src);function q(e){if(e=e.cloneNode(!0),t.uniqueIds){const s=typeof t.uniqueIds=="string"?t.uniqueIds:S;e=y(e,s,t.uniqueIdsBase)}return e=t.transformSource(e),t.title&&E(e,t.title),e.innerHTML}function x(e){h[e]||(h[e]=k(e)),l.value&&h[e].getIsPending()&&!t.keepDuringLoading&&(l.value=null,f("unloaded")),h[e].then(s=>{l.value=s,M(()=>{f("loaded",document.querySelector("svg"))})}).catch(s=>{l.value&&(l.value=void 0,f("unloaded")),delete h[e],f("error",s)})}function k(e){return H(new Promise((s,a)=>{const u=new XMLHttpRequest;u.open("GET",e,!0),m.value=u,u.onload=()=>{if(u.status>=200&&u.status<400)try{let g=new DOMParser().parseFromString(u.responseText,"text/xml").getElementsByTagName("svg")[0];g?s(g):a(new Error('Loaded file is not valid SVG"'))}catch(g){a(g)}else a(new Error("Error loading SVG"))},u.onerror=a,u.send()}))}const B=()=>l.value?D("svg",{...A(l.value,p),innerHTML:q(l.value)}):null;function E(e,s){const a=e.getElementsByTagName("title");if(a.length)a[0].textContent=s;else{const u=document.createElementNS("http://www.w3.org/2000/svg","title");u.textContent=s,e.insertBefore(u,e.firstChild)}}function y(e,s,a=""){const u=["id","href","xlink:href","xlink:role","xlink:arcrole"],g=["href","xlink:href"],I=(c,v)=>g.includes(c)&&(v?!v.includes("#"):!1);return[...e.children].forEach(c=>{var v;if((v=c.attributes)!=null&&v.length){const b=Object.values(c.attributes).map(d=>{const i=/url\((.*?)\)/.exec(d.value);return i!=null&&i[1]&&(d.value=d.value.replace(i[0],`url(${a}${i[1]}_${s})`)),d});u.forEach(d=>{const i=b.find(T=>T.name===d);i&&!I(d,i.value)&&(i.value=`${i.value}_${s}`)})}return c.children.length?y(c,s,a):c}),e}return(e,s)=>(C(),N(B))}});export{j as F};
